<!--
   SPDX-FileCopyrightText: 2021 Monaco F. J. <monaco@usp.br>
  
   SPDX-License-Identifier: GPL-3.0-or-later

   This file is part of SYSeg, available at https://gitlab.com/monaco/syseg.
-->

Contributing to SYSeg
==============================
 
 You are welcome and encouraged to contribute to SYSeg.

 These are a few guidelines.

 Contribution workflow
 ------------------------------

 The official SYSeg repository is at https://gitlab.com/monaco/syseg.
   
 To start contributing:


 0. Read the essential documentation thoroughly:

    - `docs/syseg.md`    (SYSeg manual)
    - `CONTRIBUTING.md`  (this file)

 1. Open an issue at the repository explaining the problem
 
    or suggestion you are addressing.

 2. If you want to contribute a solution for your (or anyone else's) issue:

    * fork the project
    * create a branch for the issue
    * edit the code/documentation in that branch
    * Run lint check (see below)
    * commit and push your branch
    * go to SYSeg repo and create a PR/MR request

    Do not submit a PR/MR that is not related to an open issue.

 3. Go have a coffee, or a beer, as you truly deserve it.

 Developer tools
 ------------------------------

 SYSeg provide developers with a set of helper tools to assist you in the
 development process. They can be found in directory `tools`.

 To work properly, helper tools require that you have Git installed and
 properly configured, in special:

 ```
   git config [--global] user.name  <your name>
   git config [--global] user.email <your-email>
 ```
 SYSeg uses Git under the hood to perform some tasks.

 * Available tools:

   - `syseg-newfile`    creates a new file in your project
   - `syseg-export`     copy a source file from SYSeg into your project
   - `syseg-reuse`      annotate copyright and license information

 * To create a new file:

   `tools/syseg-newfile <file-name>`

   The script should create the file, add some comments and, possibly, some
   boilerplate code based on the file type (i.e. the file-name extension).
   It will also annotate the file with copyright and licensing
   information accordingly.
   
 * To perform a lint check to check REUSE compliance (before committing):

   `tools/syseg-reuse -L`

   Make sure that it passes all the tests before committing.

 * To export a file from SYSeg to another project:

   `tools/syseg-export <file-name> <destination-path>`

    The script should copy the files and perform any necessary change.

 * The following script may be used by the use to create a stand-alone
   bundle containing a modified copy of a proposed exercise, modified to
   work outside the SYSeg source tree.

   `tools/syseg-project <destination path>`

 Use option `-h` for help.

 Code convention
 ------------------------------

 Oh, that.

 Code convention always tend to be a sensitive topic among programmers as it calls
 forth personal convictions and the weight of beloved traditions. As often,
 preferences vary largely. With that, we humbly as you to be indulgent about the
 choices made in this project.
 
 * Symbol names, comments, file names etc. in English.

 * For C code, we stick with the tradition: snake case, with symbols (variables
   and function names) in lowercase, and macros in uppercase. We use exclusively
   C multi-line comments. Filenames in lowercase.

 * Version suffix according to semantic versioning [3] schema.

 * Examples in C should use only the native runtime POSI-C library; no
   third-party libraries (exceptions may be discussed, but have not being
   needed as yet).

 * Blocks open in the next line for both functions and flow control statements
   (yes, I know, I know...)

 * File extensions:

   -`hex`  ASCII file containing values in hexadecimal representation;

   -`asm`  manually written assembly code in Intel ASM format;

   -`S`    manually written assembly code in AT&T Gas format;

   -`s`    assembly code in AT&T Gas format generated by the compiler (GCC);

   -`o`    object code produced by the assembler;

   -`i`    pre-processed source code generated by the pre-processor (CPP)

   -`bin`  flat-binary file generated by the linker;

   -`iso`  ISO9660 (ECMA-119) file system intended for optical disk media (CD) 

   -`ld`   linker script.

 Development-stage suffixes:

   - `-alpha`       wrong or incomplete implementation to exemplify problems
   - `-beta`        working example, but suboptimal or inelegant implementation
   - `(no suffix)`  working (hopefully), intended implementation

 * Comments are text. Use caption and punctuation accordingly.

 Contribution licensing
 ------------------------------

 If you have substantially modified an existing source or documentation
 file --- say it's considerably more than a simple typo correction or
 small bug fix --- you are entitled to have your name added to the copyright
 notice [1] and to the `AUTHORS` file, should you desire.

 By submitting your contribution you agree that it will be available under the
 same license as SYSeg (GNU GPL vr. 3 or later).

 Code of conduct
 ------------------------------

 Be considerate and inclusive face diversity.

 I have a matter.
 ------------------------------

 ..it happens.

 SYSeg is a work in progress and, as such, may contain suboptimal code and
 potential innacuracy in technical explanations resulting of reliance on
 imprecise or misleading references. If you ever detect one such problem,
 it would be great if you could drop the author a note.

 If it is not much trouble, please open an issue at the repository and
 apply it the lable 'matter'. Then, explain what should be improved.

 Well, if you are in the mood of submitting a PR/MR, that would be great!


 Project standards
 ------------------------------

 To keep things consistent, when applicable, we aim at some some standards.

 - REUSE specification vr. 3 [1]
 
 - GitFlow branching strategy [2]

 - Semantic versioning 2.0.0 [3]

 Contribution purpose
 ------------------------------

 When applicable, use the following convention for commit messages and branch
 names:

 PERMANENT BRANCHES

 The repository contains the two GitFlow permanent branches:
 
 - `main`   : the stable branch 
 - `dev`    : the unstable branch (aka `develop`)

 SUPPORT BRANCH NAMES (for PR/MR)

 When creating an ephemeral branch, use the following keywords to indicate the
 branch type:

 - `feat`  : extend of modify feature (GitFlow `feature`)
 - `fix`   : fix a bug (GitFlow `feature`)
 - `doc`   : modify documentation (GitFlow `feature`)
 - `hot`   : carry on maintenance on former releases  (GitFlow `hotfix`)
 - `rel`   : prepare a new release (GitFlow `release`)
 - `exp`   : experimental branch (for tests, discussion etc.)
 - `wip`   : work-in-progress branch (unrelated to any issue)

 If the branch addresses a particular issue, use the scheme

 ```
    <type>/<issue-number>/<short-descriptive-note>
 ```

 Use lowercase alphanumeric ASCII characters, underscores, and hyphens in
 place of spaces. No punctuation.

  Example:

 ```
  feat/42/modify-option-help

  fix/66/crash-on-negative-input

 ```

 It's usually preferrable that the PR/MR be linked to an existing issue.
 Sometimes, however, we admit that ad hoc changes may be pragmatically
 justifiable. In this case, if the PR/MR is not linked to an issue,
 the simplified form
 
  `<purpose>/<short-descriptive-mnemonic>`

 is acceptable (this is most appropriate for 'wip' and 'exp' types).


 COMMIT MESSAGES

 When editing the commit message, use the following keywords, inspired on lax
 version of  Conventional Commits [4], to describe the purpose of your
 contribution:
 
 - `Fix`    :   fix a bug or an unmeant requirement 
 - `Feat`   :   add or modify a feature (functional)
 - `Perf`   :   improve performance (non-functional)
 - `Tidy`   :   refactor code for quality or compliance
 - `Doc`    :   modify or extend documentation
 - `Build`  :   make changes affecting the build system
 - `Minor`  :   apply minor or cosmetic changes
 - `Repo`   :   neaten the repository
 - `Other`  :   something else


 The suggested format for messages is

 `<Purpose> : short description`

 where 'Purpose' is one of the contribution purposes listed above.

 The short description should be in imperative form (fix, add, remove etc.)
 rather than past (fixed, added) or present (fixes, adds) --- as if ordering
 what the change should do (mind the capitalization). Do not punctuate.
 
Example:

 ```
   Fix: correct wrong file name

   Fix: fix missing semicolon

   Doc: update user manual

   Repo: removed object files

```
 
 Ideally, each commit should be of only one type. In practice, though,
 it's reasonable to group changes in a single commit if they are naturally
 related (e.g. you modifying a function's argument type and edit the developer
 documentation to reflect the change). In those cases, it's ok to use

 ```
  <purpose 1> : short description 1
  
  <purpose 2> : short description 2
  ...
 ```

 Purpose indication in commit messages is suggested, but not mandatory (if not
 used, capitalize the first letter. Leave a blank line between statements.
 
 If it helps to understand the context, do not refrain from adding a paragraph
 further explaining the commit. This is normal text, so, capitalize and
 punctuate accordingly.
 

 PR/MR MERGING
 
 In the regular workflow, contributions in the form PR/MRs should be submitted
 to the mainstream repository, then analyzed and merged into the destination
 branch. Bypassing the regular protocols is exceptionally acceptable, at the
 discretion of the project maintainers, to address urgent demands such as
 critical repository maintenance or emergency bug fixes.


 OTHER CONVENTIONS

 Compliance to Keep a ChangeLog [5] is under consideration.


 References
 ------------------------------

 [1] REUSE Software, https://reuse.software

 [2] GitFlow, https://nvie.com/posts/a-successful-git-branching-model/

 [3] Semantic Versioning, https://semver.org/

 [4] Conventional Commits, https://www.conventionalcommits.org/en/v1.0.0/

 [5] Keep a ChangeLog, https://keepachangelog.com/en/1.0.0/

